{"name": "test_VP_GPFV_020", "status": "failed", "statusDetails": {"message": "AssertionError: ErrMsg:pledge account balance 1561805243975435619251340\nassert 1561805243975435619251340 == 1780902621983457009625670\n  -1561805243975435619251340\n  +1780902621983457009625670", "trace": "new_genesis_env = <environment.env.TestEnvironment object at 0x00000269F5964CC0>\nclients_noconsensus = [<tests.lib.client.Client object at 0x00000269F5A3EC18>, <tests.lib.client.Client object at 0x00000269F552C5C0>, <tests.lib.client.Client object at 0x00000269F5302320>, <tests.lib.client.Client object at 0x00000269F5A5FB70>]\n\n    @pytest.mark.P2\n    def test_VP_GPFV_020(new_genesis_env, clients_noconsensus):\n        \"\"\"\n        移出PlatON验证人与候选人名单，（扣除以后剩余自有质押金），未申请退回质押金\n        :param clients_noconsensus:\n        :return:\n        \"\"\"\n        # Change configuration parameters\n        genesis = from_dict(data_class=Genesis, data=new_genesis_env.genesis_config)\n        genesis.economicModel.slashing.slashBlocksReward = 5\n        new_file = new_genesis_env.cfg.env_tmp + \"/genesis.json\"\n        genesis.to_file(new_file)\n        new_genesis_env.deploy_all(new_file)\n    \n        client1 = clients_noconsensus[0]\n        log.info(\"Current connection node1: {}\".format(client1.node.node_mark))\n        client2 = clients_noconsensus[1]\n        log.info(\"Current connection node2: {}\".format(client2.node.node_mark))\n        economic = client1.economic\n        node = client1.node\n        # create account\n        address, _ = economic.account.generate_account(node.web3, von_amount(economic.create_staking_limit, 2))\n        address1, _ = economic.account.generate_account(node.web3, 0)\n        # create staking\n        result = client1.staking.create_staking(0, address1, address)\n        assert_code(result, 0)\n        # Wait for the settlement round to end\n        economic.wait_settlement_blocknum(node)\n        # get pledge amount1 and block reward\n        pledge_amount1, block_reward, slash_blocks = get_out_block_penalty_parameters(client1, node, 'Released')\n        log.info(\"Current block height: {}\".format(client1.node.eth.blockNumber))\n        # stop node\n        client1.node.stop()\n        # Waiting for a settlement round\n        client2.economic.wait_consensus_blocknum(client2.node, 4)\n        log.info(\"Current block height: {}\".format(client2.node.eth.blockNumber))\n        # view verifier list\n        verifier_list = client2.ppos.getVerifierList()\n        log.info(\"verifier_list: {}\".format(verifier_list))\n        candidate_info = client2.ppos.getCandidateInfo(client1.node.node_id)\n        log.info(\"Pledge node information： {}\".format(candidate_info))\n        punishment_amonut = int(Decimal(str(block_reward)) * Decimal(str(slash_blocks)))\n        log.info(\"punishment_amonut: {}\".format(punishment_amonut))\n        # Query pledge account balance\n        balance1 = client2.node.eth.getBalance(address)\n        log.info(\"pledge account balance: {}\".format(balance1))\n        # Wait for the 2 settlement round to end\n        economic.wait_settlement_blocknum(client2.node, 2)\n        # Query pledge account balance\n        balance2 = client2.node.eth.getBalance(address)\n        log.info(\"pledge account balance: {}\".format(balance2))\n>       assert balance2 == balance1 + (pledge_amount1 - punishment_amonut), \"ErrMsg:pledge account balance {}\".format(\n            balance2)\nE       AssertionError: ErrMsg:pledge account balance 1561805243975435619251340\nE       assert 1561805243975435619251340 == 1780902621983457009625670\nE         -1561805243975435619251340\nE         +1780902621983457009625670\n\n_          = '6a9da27593a950e77d20619e20ac7784778ce74e1535a68aace752cc6a1f1020'\naddress    = '0xA7162782C63e11C44D037E53a6403D54c96E8CC8'\naddress1   = '0xd46A9daC8Ee8D0aCfc57F719134c56eb63AA485E'\nbalance1   = 999999999991478400000000\nbalance2   = 1561805243975435619251340\nblock_reward = 43819475601604278074866\ncandidate_info = {'Code': 0, 'Ret': {'BenefitAddress': '0xd46a9dac8ee8d0acfc57f719134c56eb63aa485e', 'BlsPubKey': '6b17b62a0ead315541f2...e216b0ef86da62f2370f303507e60c9d830db271208733a88e85796fc7a050006', 'DelegateEpoch': 0, 'DelegateRewardTotal': 0, ...}}\nclient1    = <tests.lib.client.Client object at 0x00000269F5A3EC18>\nclient2    = <tests.lib.client.Client object at 0x00000269F552C5C0>\nclients_noconsensus = [<tests.lib.client.Client object at 0x00000269F5A3EC18>, <tests.lib.client.Client object at 0x00000269F552C5C0>, <tests.lib.client.Client object at 0x00000269F5302320>, <tests.lib.client.Client object at 0x00000269F5A5FB70>]\neconomic   = <tests.lib.economic.Economic object at 0x00000269F5A3E4A8>\ngenesis    = Genesis(config=Config(chainId=100, eip155Block=3, cbft=Cbft(initialNodes=[{'node': 'enode://488fb1c783f7ac6a20d320e844...': '0'}}, number='0x0', gasUsed='0x0', parentHash='0x0000000000000000000000000000000000000000000000000000000000000000')\nnew_file   = 'D:\\\\GO\\\\src\\\\github.com\\\\PlatONnetwork\\\\PlatON-Go\\\\cases\\\\deploy\\\\tmp\\\\lifapan\\\\env/genesis.json'\nnew_genesis_env = <environment.env.TestEnvironment object at 0x00000269F5964CC0>\nnode       = <environment.node.Node object at 0x00000269F589DCC0>\npledge_amount1 = 1000000000000000000000000\npunishment_amonut = 219097378008021390374330\nresult     = 0\nslash_blocks = '5'\nverifier_list = {'Code': 0, 'Ret': [{'BenefitAddress': '0x1000000000000000000000000000000000000003', 'BlsPubKey': 'fa340928f6edfb9f4c3...b96aa54009ffa655cea68ae81f44515483d9f5a939d31a9e0d34bd02', 'DelegateRewardTotal': '0x0', 'DelegateTotal': '0x0', ...}]}\n\ntests\\ppos\\test_general_punishment.py:995: AssertionError"}, "description": "\n    移出PlatON验证人与候选人名单，（扣除以后剩余自有质押金），未申请退回质押金\n    :param clients_noconsensus:\n    :return:\n    ", "attachments": [{"name": "env log", "source": "e8511985-78a3-4059-8605-ae9034005f6b-attachment.uri", "type": "text/uri-list"}, {"name": "env status", "source": "782cd0b3-b3a8-4afc-8fd3-d0c883057c5d-attachment.txt", "type": "text/plain"}, {"name": "log", "source": "78d850cf-f53b-4373-a439-6fe1b109920e-attachment.txt", "type": "text/plain"}], "start": 1586633384132, "stop": 1586633892327, "uuid": "b5cdc3c0-dafb-4bae-b4d7-f98232bd109a", "historyId": "aac82c3a2e50c856d8a9d7d3ba923822", "testCaseId": "c164102c73a207b44a2e7ab4662f8dbd", "fullName": "tests.ppos.test_general_punishment#test_VP_GPFV_020", "labels": [{"name": "tag", "value": "P2"}, {"name": "parentSuite", "value": "tests.ppos"}, {"name": "suite", "value": "test_general_punishment"}, {"name": "host", "value": "hietel"}, {"name": "thread", "value": "25124-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.ppos.test_general_punishment"}]}